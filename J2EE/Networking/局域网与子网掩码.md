# 局域网与子网掩码

## 局域网
接入公网中的所有设备或子网都有一个唯一IP，以作为网络中的坐标。而局域网作为一个子网，都通过唯一一个端口连接外网。网内的机器通过NAT（网络地址转换）协议来分配地址。内网的机器通过NAT协议，可以访问外网，而外网的机器则无法定位到内网的机器。

## 子网掩码
假设我们的局域网有很多的机器，现在需要把局域网中的机器根据部门分成不同的组（子网），，而如何实现呢？通过IP地址与子网掩码组合实现。局域网IP是计算机在局域网内的唯一标识，子网掩码用于划分子网。

子网掩码是这样工作的：

192        168         1           30          IP地址

11111111   11111111    11111111    00000000    子网掩码255.255.255.0

掩码的'1'对应的掩盖的地址，即是子网锁定的地址段位，'0'对应的是子网中可以自己填入的地址。比如这里八个0，实际上就是256个地址。

## 为何局域网地址都是192.168.x.x
一般路由器的Ip地址是：192.168.1.1或者192.168.0.1

（这个是根据约定俗称成以及局域网中需要容纳的主机数量来确定的。实际上IPv4地址协议中预留了3个IP地址段作为私有地址，供组织结构内部使用，这三个地址段分别位于A、B、C三类地址内
  * A类地址：10.0.0.0--10.255.255.255
  * B类地址：172.16.0.0--172.31.255.255
  * C类地址：192.168.0.0--192.168.255.255

因此路由的IP地址不是一定要是192.168.x.x,而是可以根据需求选取的。不过对于少于254太机器的局域网，我们默认使用192.168.0.1或192.168.1.1）

## 举例

现在有如下要求：公司有四个部门：行政、研发、营销、售后，每个部门各40台计算机接入公司局域网交换机，如果要在192.168.1.0网段为每个部门划分子网，子网掩码应该怎么设置，每个子网的地址范围分别是什么？
  1. 192.168.1.0网段共256个地址，划分4个子网，每个子网需要64个地址。
  2. 根据子网掩码的原理，64是2的6次方，所以子网掩码应该以6个0结尾，剩下的用1补齐，由26个1和6个0组成，转换成十进制是255.255.255.192；
  3. 每个子网共64个IP地址，掐去头尾后可用地址只有62个，第1个子网的可用IP地址范围是：192.168.1.1-62，第二个子网可用IP地址范围是：192.168.1.65-126，第三个子网可用IP地址范围是：192.168.1.129-190，第四个子网可用IP地址范围是：192.168.1.193-254。
  4. 该公司各部门计算机按照3中的IP地址范围进行设置，所有计算机的子网掩码都必须设置为255.255.255.192，设置完毕后个部门内的计算机能正常联网，不同部门间的计算机无法直接连通。
