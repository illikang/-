# AWS的CloudFormation

## 一、什么是CloudFormation（是什么）
CloudFormation是AWS上管理基础架构的最强的工具之一。CloudFormation基于模板来创建基础架构，也就是我们称作蓝图的东西。

模板(蓝图)使用JSON描述了用户的基础架构，CloudFormation能对其进行解析。用户只需要使用声明的表达语句，而不是给出实现它需要的所有操作。描述的方法意味着用户告诉CloudFormation需要什么样的基础架构以及组件之间是怎么连接的，而不需要告诉CloudFormation需要哪些操作来创建那样的基础架构，不需要定义操作被执行的顺序。

## 二、CloudFormation模板（怎么用）
1. 一个基本的CloudFormation模板分为5个部分：
  * 版本：管理模板的版本
  * 描述：描述模板是关于什么的
  * 参数：为模板提供信息，类似编程开发中的常量。例如，域名、客户ID和数据库密码等。
  * 资源：一项资源是用户能描述的最小组件。例如，虚拟服务器、负载均衡服务器或弹性IP地址。
  * 输出：和参数有点像，但是用途正好相反。输出从模板返回一些信息，如一台EC2服务器的公有域名。
2. 模板结构的代码描述：
{
  “AWSTemplateFormateVersion”:"2018-09-09",
  "Description"："CloudFormation template structure"
  "Parameters:"{[...]}"
  "Resources:"{[...]}"
  "Outputs:"{[...]}"
}

## 三、CloudFormation的好处（为什么）
1. 它让用户在AWS平台上以统一的方式来描述基础架构。如果用户用脚本来创建自己的基础架构，每个人会用不同的方法解决同样的问题。这对新开发人员与运维人员是个障碍，他们需要努力去理解代码要做什么。CloudFormation模板是一个定义基础架构的清晰的语言。
2. 它能处理依赖关系。永远不要尝试使用脚本来创建一个复杂的基础架构，组件之间的依赖关系会变得一团糟。
3. 它是可复制的。如何使用户的测试环境和生产环境保持完全一致？使用CloudFormation，用户能够创建两个完全一样的基础架构并且保持它们同步。
4. 它是可自定义的。用户可以向CloudFormation插入自定义的参数来按期望自定义模板。
5. 它是可测试的。从模板创建基础架构是可测试的。随时可以按需启动一个新的基础架构，运行测试，完成后再关掉它。
6. 它是可更新的。CloudFormation可以更新用户的基础架构。它将找出模板中改变了的部分，然后将这些变化尽可能平滑地应用到现有的基础架构。
7. 它最小化认为的误操作。CloudFormation不会感到疲倦——即使是在凌晨3点。
8. 它把基础架构文档化。CloudFormation模板是一个JSON文档。用户可以把它当作代码，然后使用一个版本控制系统（如Git）来跟踪变更。
9. 它是免费的。CloudFormation服务本身不会产生额外费用。
