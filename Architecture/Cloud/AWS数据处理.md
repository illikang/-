# AWS数据处理

## 一、对象存储
AWS提供了三种数据数据保存的方法：
1. S3：Amazon Simple Storage Service。S3是一个典型的Web服务，让用户可以通过HTTPS和API来存储和访问数据。这个服务提供了无线存储空间，并且让用户的数据高可用和高度持久化的保存。用户可以保存任何类型的数据，如图片、文档和二进制文件，只要单个对象的容量不超过5TB。
2. EBS：Elastic Block Store，弹性数据块存储。EBS提供网络附加的，数据块级别的存储。它不属于EC2实例的一部分，可以独立存在或者同一时间挂载到一个EC2实例上。EBS通过网卡附加到EC2实例上以后，可以像普通硬盘一样使用。如果终结了EC2实例，EBS卷依然存在。
3. 实例存储。实力存储像物理磁盘一样提供块级别的存储。实力存储是EC2的一部分，并且只有在EC2正常运行的时候才可用。如果停止或者终止实例，上面的数据不会持久化保存。

S3和AWS块存储方案的比较

| Header One     | S3    |EBS     |实例存储    |
| :------------- | :------------- |:------------- |:------------- |
| 常见的使用场景       |集成到应用程序中以保存用户上传的内容       |为需要块级别存储的数据库或者传统应用程序提供持久化       |提供临时数据存储或者为内建技术来防止数据丢失的应用程序提供高性能存储      |
| 独立资源       | 是       |是       |否       |
| 如何访问数据       |HTTP API       |EC2实例/系统调用       |EC2实例/系统调用        |
| 是否有文件系统      | 没有       |有       |有       |
| 防止数据丢失      | 很高       |高       |低       |
| 每GB容量成本       | ￥￥      |￥￥￥       |￥       |
| 运维开销       | 无      |低      |中等     |

## 二、关系型数据库
如果想在AWS上使用一个关系数据库，有以下两个选择：
1. 使用托管的数据服务，如Amazon RDS,Amazon Aurora，由AWS提供。
2. 在虚拟服务器上自己搭建关系数据库。

RDS提供了方便、可用的关系数据库。在底层，Amazon RDS运行一个常见的关系数据库。它支持MySQL,Oracle Database,微软SQL Server和PostgreSQL。如果应用程序使用上述的几种关系数据库的引擎，迁移到Amazon RDS将非常容易。

托管服务RDS和虚拟服务器上自建数据库的比较：

| Header One     |Amazon RDS     |在虚拟服务器上自己搭建     |
| :------------- | :------------- | :------------- |
| AWS服务的成本      |更高，因为RDS的成本高于EC2虚拟服务器       |更低，因为EC2虚拟服务器比RDS便宜|
| 总体拥有成本      | 更低，因为更多客户分担了运维成本      | 高很多，因为需要人力来管理数据库    |
| 质量    | AWS专业人员负责托管服务       | 你需要搭建专业团队和进行质量管理     |
| 灵活性  | 高，因为你可以选择数据库引擎和修改配置参数 | 更高，因为你可以控制安装在虚拟服务器上的数据库的每个部分。|

## 三、非关系型数据库
拓展传统的关系数据库非常困难，因为保证事物（原子性、一致性、隔离、持久性，也叫做ACID）需要跨数据库的所有节点通信。添加的节点越多，数据库会变得越慢，因为更多的节点需要彼此协调交易操作。要应对这样的难题需要使用不提供上面ACID保证的数据库类型。他们叫做NoSQL数据库。

有4种主要的NoSQL数据库（文档、图形、列式和键值存储），每种类型有使用的场景和应用程序。亚马逊提供一个叫做DynamoDB的NoSQL数据库服务。和RDS不一样，DynamoDB是完全托管的，非开源的键值存储。DynamoDB同样是高可用和高度持久的。用户可以把DynamoDB的容量从一个项目扩展到几十亿个项目，也可以把它的性能从每秒钟一个操作扩展到每秒上万个操作。如果用户希望使用不同的NoSQL数据库类型（如MangoDB这样的文档数据库），你需要启动EC2实例并且在上面自己安装管理MongoDB。
